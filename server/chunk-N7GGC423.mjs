import './polyfills.server.mjs';
import{b as B}from"./chunk-JPGT3RTH.mjs";import{Fa as L,Gb as q,H as P,Ka as I,La as j,M as u,Ma as F,Na as V,Nb as U,O as T,Oa as a,Pa as o,Qa as g,Ta as w,V as f,Va as v,W as x,Wa as s,Ya as l,Za as h,_a as A,ab as R,cb as _,db as C,m as k,sa as d}from"./chunk-J4MMKU5G.mjs";import{h as E}from"./chunk-NDYDZJSS.mjs";var b={apiURL:"https://fakestoreapi.com",stripeAPIKey:"pk_test_51PT8cSGSFF9Zp2j58o8rbeziMfLcPD31G6ztay34IxbKegfckLTurdJgu3ZlhIBqq2sv49MLJueLk75xU0QrLVAa00nyotcKFJ",serverURL:"http://localhost:4242"};var D="https://js.stripe.com/v3",z=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,G="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",Q=function(){for(var e=document.querySelectorAll('script[src^="'.concat(D,'"]')),r=0;r<e.length;r++){var n=e[r];if(z.test(n.src))return n}return null},M=function(e){var r=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(D).concat(r);var t=document.head||document.body;if(!t)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return t.appendChild(n),n},Z=function(e,r){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"3.5.0",startTime:r})},p=null,S=null,y=null,H=function(e){return function(){e(new Error("Failed to load Stripe.js"))}},N=function(e,r){return function(){window.Stripe?e(window.Stripe):r(new Error("Stripe.js not available"))}},O=function(e){return p!==null?p:(p=new Promise(function(r,n){if(typeof window>"u"||typeof document>"u"){r(null);return}if(window.Stripe&&e&&console.warn(G),window.Stripe){r(window.Stripe);return}try{var t=Q();if(t&&e)console.warn(G);else if(!t)t=M(e);else if(t&&y!==null&&S!==null){var c;t.removeEventListener("load",y),t.removeEventListener("error",S),(c=t.parentNode)===null||c===void 0||c.removeChild(t),t=M(e)}y=N(r,n),S=H(n),t.addEventListener("load",y),t.addEventListener("error",S)}catch($){n($);return}}),p.catch(function(r){return p=null,Promise.reject(r)}))},Y=function(e,r,n){if(e===null)return null;var t=e.apply(void 0,r);return Z(t,n),t},m,K=!1,W=function(){return m||(m=O(null).catch(function(e){return m=null,Promise.reject(e)}),m)};Promise.resolve().then(function(){return W()}).catch(function(i){K||console.warn(i)});var J=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];K=!0;var t=Date.now();return W().then(function(c){return Y(c,r,t)})};var X=(()=>{let e=class e{constructor(){this._http=u(U),this._url=b.serverURL}onProceedToPay(n){return this._http.post(`${this._url}/checkout`,{items:n}).pipe(k(t=>E(this,null,function*(){(yield J(b.stripeAPIKey))?.redirectToCheckout({sessionId:t.id})}))).subscribe({error:t=>console.error("Error",t)})}};e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();function te(i,e){if(i&1){let r=w();a(0,"tr")(1,"td",16),l(2),o(),a(3,"td",16),l(4),o(),a(5,"td",17),l(6),_(7,"currency"),o(),a(8,"td")(9,"button",18),v("click",function(){let t=f(r).$implicit,c=s(2);return x(c.removeItem(t.id))}),l(10," X "),o()()()}if(i&2){let r=e.$implicit;d(2),h(r.title),d(2),h(r.qty),d(2),h(C(7,3,r.price))}}function re(i,e){if(i&1){let r=w();a(0,"div",4)(1,"div",5)(2,"button",6),v("click",function(){f(r);let t=s();return x(t.clearAll())}),l(3,"Clear all"),o()(),a(4,"table",7)(5,"thead")(6,"tr")(7,"th",8),l(8," Name"),o(),a(9,"th",9),l(10,"Qty"),o(),a(11,"th",9),l(12,"Price"),o(),g(13,"th",9),o()(),a(14,"tbody"),F(15,te,11,5,"tr",null,j),o(),a(17,"tfoot")(18,"tr")(19,"td",10),g(20,"hr",11),o()(),a(21,"tr")(22,"td",12),l(23,"Total:"),o(),a(24,"td",13),l(25),_(26,"currency"),o()()()()(),a(27,"div",14)(28,"button",15),v("click",function(){f(r);let t=s();return x(t.onProceedToPay())}),l(29,"Pay"),o()()}if(i&2){let r=s();d(15),V(r.cartStore.products()),d(10),A("",C(26,1,r.cartStore.totalAmount())," ")}}function ne(i,e){i&1&&(a(0,"div",2)(1,"h3",19),l(2,"The shopping cart is empty"),o()())}var we=(()=>{let e=class e{constructor(){this.cartStore=u(B),this._checkoutSvc=u(X)}onProceedToPay(){this._checkoutSvc.onProceedToPay(this.cartStore.products())}removeItem(n){this.cartStore.removeFromCart(n)}clearAll(){this.cartStore.clearCart()}};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=T({type:e,selectors:[["app-checkout"]],standalone:!0,features:[R],decls:7,vars:1,consts:[[1,"text-gray-600","body-font"],[1,"container","px-5","py-24","mx-auto"],[1,"flex","flex-col","w-full","mb-20","text-center"],[1,"mb-2","text-3xl","font-medium","text-gray-900","sm:text-4xl","title-font"],[1,"w-full","mx-auto","overflow-auto","lg:w-2/3"],[1,"flex","justify-end","p-2"],[1,"flex","px-8","py-2","text-lg","text-white","bg-orange-500","border-0","rounded","focus:outline-none","hover:bg-red-600",3,"click"],[1,"w-full","text-left","whitespace-no-wrap","table-auto"],[1,"px-4","py-3","text-sm","font-medium","tracking-wider","text-gray-900","bg-gray-100","rounded-tl","rounded-bl","title-font"],[1,"px-4","py-3","text-sm","font-medium","tracking-wider","text-gray-900","bg-gray-100","title-font"],["colspan","4"],[1,"border-gray-900","border-t-1"],["colspan","2"],[1,"px-4","py-3","text-lg","not-italic","font-bold","text-gray-900"],[1,"flex","w-full","pl-4","mx-auto","mt-4","lg:w-2/3"],[1,"flex","px-6","py-2","ml-auto","text-white","bg-orange-500","border-0","rounded","focus:outline-none","hover:bg-orange-600",3,"click"],[1,"px-4","py-3"],[1,"px-4","py-3","text-lg","text-gray-900"],[1,"flex","px-2","text-white","bg-orange-500","border-0","rounded","focus:outline-none","hover:bg-red-600",3,"click"],[1,"my-2","text-3xl","font-medium","text-gray-900","sm:text-4xl","title-font"]],template:function(t,c){t&1&&(a(0,"section",0)(1,"div",1)(2,"div",2)(3,"h1",3),l(4,"Checkout page"),o()(),L(5,re,30,3)(6,ne,3,0,"div",2),o()()),t&2&&(d(5),I(c.cartStore.productsCount()?5:6))},dependencies:[q],encapsulation:2});let i=e;return i})();export{we as default};
